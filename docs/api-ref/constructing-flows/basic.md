# Basic Operations

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->


<DocSection type="class" name="FlowSpec" module="metaflow" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/metaflow/flowspec.py#L48">
<SigArgSection>
<SigArg name="use_cli" default="True" />
</SigArgSection>
<Description summary="Main class from which all Flows should inherit." />
<ParamSection name="Attributes">
	<Parameter name="script_name" />
	<Parameter name="index" />
	<Parameter name="input" />
</ParamSection>
</DocSection>



<DocSection type="method" name="FlowSpec.next" module="metaflow" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/flowspec.py#L484">
<SigArgSection>
<SigArg name="self" /><SigArg name="*dsts" /><SigArg name="**kwargs" />
</SigArgSection>
<Description summary="Indicates the next step to execute at the end of this step" extended_summary="This statement should appear once and only once in each and every step (except the `end`\nstep). Furthermore, it should be the last statement in the step.\n\nThere are several valid formats to specify the next step:\n    - Straight-line connection: self.next(self.next_step) where `next_step` is a method in\n      the current class decorated with the `@step` decorator\n    - Static fan-out connection: self.next(self.step1, self.step2, ...) where `stepX` are\n      methods in the current class decorated with the `@step` decorator\n    - Foreach branch:\n        self.next(self.foreach_step, foreach='foreach_iterator')\n      In this situation, `foreach_step` is a method in the current class decorated with the\n      `@step` docorator and `foreach_iterator` is a variable name in the current class that\n      evaluates to an iterator. A task will be launched for each value in the iterator and\n      each task will execute the code specified by the step `foreach_step`." />
<ParamSection name="Raises">
	<Parameter type="InvalidNextException" desc="Raised if the format of the arguments does not match one of the ones given above." />
</ParamSection>
</DocSection>



<DocSection type="method" name="FlowSpec.foreach_stack" module="metaflow" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/metaflow/flowspec.py#L271">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Returns the current stack of foreach steps for the current step" extended_summary="This effectively corresponds to the indexes and values at the various levels of nesting.\nFor example, considering the following code:\n```\n@step\ndef root(self):\n    self.split_1 = ['a', 'b', 'c']\n    self.next(self.nest_1, foreach='split_1')\n\n@step\ndef nest_1(self):\n    self.split_2 = ['d', 'e', 'f', 'g']\n    self.next(self.nest_2, foreach='split_2'):\n\n@step\ndef nest_2(self):\n    foo = self.foreach_stack()\n```\nfoo will take the following values in the various tasks for nest_2:\n    [(0, 3, 'a'), (0, 4, 'd')]\n    [(0, 3, 'a'), (1, 4, 'e')]\n    ...\n    [(0, 3, 'a'), (3, 4, 'g')]\n    [(1, 3, 'b'), (0, 4, 'd')]\n    ...\n\nwhere each tuple corresponds to:\n    - the index of the task for that level of the loop\n    - the number of splits for that level of the loop\n    - the value for that level of the loop\nNote that the last tuple returned in a task corresponds to:\n    - first element: value returned by self.index\n    - third element: value returned by self.input" />
<ParamSection name="Returns">
	<Parameter type="List[Tuple[int, int, object]]" desc="An array describing the current stack of foreach steps" />
</ParamSection>
</DocSection>

